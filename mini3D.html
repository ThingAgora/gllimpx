<html>

<head>
<title>mini3D</title>
<link rel="stylesheet" type="text/css" href="/css/luc.css" />

<script type="text/javascript" src="matrix.js"></script>
<script type="text/javascript" src="vector.js"></script>
<script type="text/javascript" src="matrix3D.js"></script>
<script type="text/javascript" src="vector3D.js"></script>
<script type="text/javascript" src="mesh.js"></script>
<script type="text/javascript" src="object3D.js"></script>
<script type="text/javascript" src="box.js"></script>
<script type="text/javascript" src="polySphere.js"></script>
<script type="text/javascript" src="polyCylinder.js"></script>
<script type="text/javascript" src="polyCone.js"></script>
<script type="text/javascript" src="x3d.js"></script>

<script type="text/javascript">

var scene, canvas, gc, outLog, xmlDoc, xmlhttp;

function doAjaxQuery(method, url) {
  xmlhttp=new XMLHttpRequest();
  xmlhttp.onreadystatechange=function() {
		if (xmlhttp.readyState==4 && xmlhttp.status==200) {
			var parser=new DOMParser();
			xmlDoc = parser.parseFromString(xmlhttp.responseText, "text/xml");
			var xxx = new x3d();
			scene = xxx.getScene(xmlDoc);
			scene.reset(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
			scene.update(canvas.width / 2,canvas.width,canvas.height);
			scene.paint(gc);
		}
	}
  xmlhttp.open(method, url, true);
  xmlhttp.send();
}

function initScene() {
	outLog = document.getElementById("outLog");
	canvas = document.getElementById("outputCanvas");
	gc = canvas.getContext("2d");

	var getUrl = "http://127.0.0.1/x3d/axes.wrl.x3d";
	outLog.innerHTML = "<b>Loading </b>" + getUrl + "<br>";
	doAjaxQuery("GET", getUrl);
}

</script>
</head>


<body onLoad="initScene()">

<center><h1>mini3D on HTML5 canvas</h1></center>

<hr/>

<center>
<canvas id="outputCanvas" width="480" height="320">
</canvas>
</center>

<hr/>
<div id="outLog"></div>
</body>
</html>
