<html>

<head>
<title>gllimpx</title>

<script type="text/javascript" src="gllimpx.js"></script>

<script type="text/javascript">

var gll = new gllimpx();

var outputCanvas, dragAction;

function initScene(text) {
	outputCanvas = document.getElementById("outputCanvas");
	dragAction = document.getElementById("dragAction");
	gll.parseX3d(text);
	gll.setCanvas(outputCanvas);
	gll.redrawCanvas();
}

function canvasOnMouseMove(event) {
	switch (dragAction.selectedIndex) {
	case 0:
		gll.rotateOnMouseMove(event);
		break;
	case 1:
		gll.translateOnMouseMove(event);
		break;
	case 2:
		gll.zoomOnMouseMove(event);
		break;
	}
}

</script>
</head>


<body onload="initScene(controlForm.modelText.value)">

<center><h1>gllimpx</h1></center>

<hr/>

<center>
<canvas id="outputCanvas" style="width:640px;height:480px;border-style:solid;border-width:1px"
onmousedown="gll.onMouseDown(event)"
  onmousemove="canvasOnMouseMove(event)"
  onmouseup="gll.onMouseUp(event)"
  onmouseout="gll.onMouseUp(event)"
  >
</canvas>
</center>

<hr/>
<form name="controlForm">
 <select id="dragAction">
	 <option>
	 Rotate
	 </option>
	 <option>
	 Translate
	 </option>
	 <option>
	 Zoom
	 </option>
 </select>
 <input type="button" value="Load" onClick="initScene(modelText.value)"/>
 <textarea name="modelText" rows="40" cols="120">
	<X3D profile='Immersive' version='3.0' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='http://www.web3d.org/specifications/x3d-3.0.xsd'>
		<Scene>
			<Transform scale="4 4 4">
				<Transform>
					<Transform>
						<Shape>
							<Appearance DEF="Gris">
								<Material diffuseColor="0.7 0.7 0.7"/>
							</Appearance>
							<Cylinder radius="0.1" height="1.0"/>
						</Shape>
					</Transform>
					<Transform translation="0.0 0.6 0.0">
						<Shape>
							<Appearance DEF="Vert">
								<Material diffuseColor="0.6 1.0 0.6"/>
							</Appearance>
							<Cone height="0.2" bottomRadius="0.2"/>
						</Shape>
					</Transform>
				</Transform>
				<Transform rotation="0.0 0.0 1.0 -1.57">
					<Transform>
						<Shape>
							<Appearance USE="Gris"/>
							<Cylinder radius="0.1" height="1.0"/>
						</Shape>
					</Transform>
					<Transform translation="0.0 0.6 0.0">
						<Shape>
							<Appearance DEF="Rouge">
								<Material diffuseColor="1.0 0.6 0.6"/>
							</Appearance>
							<Cone height="0.2" bottomRadius="0.2"/>
						</Shape>
					</Transform>
				</Transform>
				<Transform rotation="1.0 0.0 0.0 1.57">
					<Transform>
						<Shape>
							<Appearance USE="Gris"/>
							<Cylinder radius="0.1" height="1.0"/>
						</Shape>
					</Transform>
					<Transform translation="0.0 0.6 0.0">
						<Shape>
							<Appearance DEF="Bleu">
								<Material diffuseColor="0.6 0.6 1.0"/>
							</Appearance>
							<Cone height="0.2" bottomRadius="0.2"/>
						</Shape>
					</Transform>
				</Transform>
			</Transform>
		</Scene>
	</X3D>
 </textarea>
</form>

</body>
</html>
